---
- hosts: localhost
  vars:
    managed_dotfiles:
      - .bash_profile
      - .tmux.conf
      - .gitconfig
      - .emacs
    managed_dirs:
      - dev ## dev(elopment)
      ##
      ## Ref http://refspecs.linuxfoundation.org/FHS_3.0/fhs-3.0.html#usrlocalLocalHierarchy
      - bin
    managed_bins_from_provisioning:
      - brew

  tasks:

    ## Dotfiles e.g. ~/.*

    - file:
        path={{ home_prefix }}/{{ item }}
        state=link
        src={{ dotfiles_dir }}/{{ item }}
      with_items: "{{ managed_dotfiles }}"

    ## Top directories e.g. ~/*

    - file:
        path={{ home_prefix }}/{{ item }}
        state=directory
      with_items: "{{ managed_dirs }}"

    ## Binaries e.g. ~/bin/*

    - file:
        path={{ home_prefix }}/bin/{{ item }}
        state=link
        src={{ provisioning_osx_root_dir }}/bin/{{ item }}
      with_items: "{{ managed_bins_from_provisioning }}"

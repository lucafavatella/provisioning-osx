#!/usr/bin/make -f

.DEFAULT_GOAL: run_macos

ifeq ($(origin ROOT_DIR), undefined)
$(error Undefined variable ROOT_DIR)
endif

REPO = https://github.com/lucafavatella/mathiasbynens-dotfiles.git
VERSION = c9a0dec

DIR = $(ROOT_DIR)/home/provisioning-osx.d/mathiasbynens-dotfiles
ORIGIN = provisioning-osx

.PHONY: run_macos
run_macos: $(DIR)/.macos
	$<

.PHONY: $(DIR)/.macos
$(DIR)/.macos: | $(DIR)
	$(MAKE) -f "$(ROOT_DIR)"/bin/git-get REPO="$(REPO)" VERSION="$(VERSION)" DIR="$(DIR)" ORIGIN="$(ORIGIN)"

$(DIR):
	mkdir -p "$@"
